import{d as V,g as $,o as l,w as s,k as A,v as C,u as n,r as D,p as _,e as k,M as P,Q as U,c as m,b as c,F as h,l as S,a as d,i as w,t as g}from"./app-C7qftLuf.js";import{a as z}from"./aos-CJZ3rAtI.js";import N from"./VideoPlayer-D_odUrrV.js";import{P as M,c as Z}from"./Primitive-NwNlYa7O.js";import{c as j}from"./utils-DjqsqOe8.js";import{r as L}from"./index-csDUFi8B.js";import{_ as Q,a as q,b as G,c as H,d as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-DnBbLyt2.js";const K=V({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(v){const u=v,p=L(u,"class");return(o,i)=>(l(),$(n(M),C({"data-slot":"badge",class:n(j)(n(R)({variant:o.variant}),u.class)},n(p)),{default:s(()=>[A(o.$slots,"default")]),_:3},16,["class"]))}}),R=Z("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),X={class:"p-10"},Y={class:"grid grid-cols-2 gap-2"},ee={class:"flex flex-wrap gap-2"},E=4,le={__name:"UpcomingEvent",props:{rawEvents:Array},emits:["goto-component"],setup(v,{emit:u}){const p=v,o=D([]),i=D(0);let f=null;const O=u,b=()=>{const e=new Date,a=(e.getDay()+6)%7,r=new Date(e);return r.setDate(e.getDate()-a),r},y=()=>{const e=b(),t=new Date(e);return t.setDate(e.getDate()+6),t},B=_(()=>{const e=o.value.filter(a=>{const r=new Date(a.start);return r>=b()&&r<=y()}),t=i.value;return e.slice(t,t+E)}),x=_(()=>o.value.filter(t=>{const a=new Date(t.start);return a>=b()&&a<=y()}).length),W=_(()=>B.value.map(e=>{const t=new Date(e.start),a=new Date(e.end),r=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Singapore",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(t).replace(",",""),F=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Singapore",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a).replace(",","");return{...e,formatedDateEnd:F,formattedStart:r}}));k(()=>{console.log(x.value),console.log(`curr: ${i.value} ${p.rawEvents.length}`),z.init(),f=setInterval(()=>{i.value>=x.value-1?f!==null&&(clearInterval(f),i.value=0,I()):i.value+=E},3e3)});function I(){O("goto-component",N)}P(()=>{clearInterval(f)}),k(async()=>{const e=await T();o.value=e,console.log(e)});const T=async()=>U.get(route("calendar-events.all")).then(e=>e.data).catch(e=>{console.log(e);let t=getErrorStr(e.response.data.errors);return warning(t),e});return(e,t)=>(l(),m(h,null,[c("div",X,[t[0]||(t[0]=c("p",{class:"text-2xl font-bold mb-2","data-aos":"fade-right"},"Events for the week",-1)),c("div",Y,[(l(!0),m(h,null,S(W.value,a=>(l(),m("div",{key:a.title,class:"p-5","data-aos":"fade-right"},[d(n(J),{class:"w-1/2] border border-gray-300 bg-blue-600 text-white"},{default:s(()=>[d(n(Q),null,{default:s(()=>[d(n(q),null,{default:s(()=>[w(g(a.title),1)]),_:2},1024),d(n(G),{class:"text-white"},{default:s(()=>[w(g(a.formattedStart)+" - "+g(a.formatedDateEnd)+".",1)]),_:2},1024)]),_:2},1024),d(n(H),null,{default:s(()=>[c("div",ee,[(l(!0),m(h,null,S(a.attendees,r=>(l(),$(n(K),{key:r.email,class:"bg-blue-500"},{default:s(()=>[w(g(r.email),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]))),128))])]),t[1]||(t[1]=c("div",{class:"p-10"},null,-1))],64))}};export{le as default};
