import{d as F,g as O,o as l,w as s,k as V,v as C,u as n,r as D,p as _,e as k,M as P,Q as U,c as g,b as c,F as h,l as S,a as d,i as w,t as m}from"./app-C9NaeMsm.js";import z from"./VideoPlayer-DzwUhWcz.js";import{P as N,c as M}from"./Primitive-BuE_hllP.js";import{c as Z}from"./utils-DjqsqOe8.js";import{r as j}from"./index-B6aPVtpH.js";import{_ as L,a as Q,b as q,c as G,d as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-BVy20yvt.js";import"./aos-Cd952O-Z.js";const J=F({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(v){const u=v,p=j(u,"class");return(o,i)=>(l(),O(n(N),C({"data-slot":"badge",class:n(Z)(n(K)({variant:o.variant}),u.class)},n(p)),{default:s(()=>[V(o.$slots,"default")]),_:3},16,["class"]))}}),K=M("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),R={class:"p-10"},X={class:"grid grid-cols-2 gap-2"},Y={class:"flex flex-wrap gap-2"},E=4,ie={__name:"UpcomingEvent",props:{rawEvents:Array},emits:["goto-component"],setup(v,{emit:u}){const p=v,o=D([]),i=D(0);let f=null;const $=u,b=()=>{const e=new Date,a=(e.getDay()+6)%7,r=new Date(e);return r.setDate(e.getDate()-a),r},y=()=>{const e=b(),t=new Date(e);return t.setDate(e.getDate()+6),t},B=_(()=>{const e=o.value.filter(a=>{const r=new Date(a.start);return r>=b()&&r<=y()}),t=i.value;return e.slice(t,t+E)}),x=_(()=>o.value.filter(t=>{const a=new Date(t.start);return a>=b()&&a<=y()}).length),W=_(()=>B.value.map(e=>{const t=new Date(e.start),a=new Date(e.end),r=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Singapore",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(t).replace(",",""),A=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Singapore",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a).replace(",","");return{...e,formatedDateEnd:A,formattedStart:r}}));k(()=>{console.log(x.value),console.log(`curr: ${i.value} ${p.rawEvents.length}`),AOS.init(),f=setInterval(()=>{i.value>=x.value-1?f!==null&&(clearInterval(f),i.value=0,I()):i.value+=E},3e3)});function I(){$("goto-component",z)}P(()=>{clearInterval(f)}),k(async()=>{const e=await T();o.value=e,console.log(e)});const T=async()=>U.get(route("calendar-events.all")).then(e=>e.data).catch(e=>{console.log(e);let t=getErrorStr(e.response.data.errors);return warning(t),e});return(e,t)=>(l(),g(h,null,[c("div",R,[t[0]||(t[0]=c("p",{class:"text-2xl font-bold mb-2","data-aos":"fade-right"},"Events for the week",-1)),c("div",X,[(l(!0),g(h,null,S(W.value,a=>(l(),g("div",{key:a.title,class:"p-5","data-aos":"fade-right"},[d(n(H),{class:"w-1/2] border border-gray-300 bg-blue-600 text-white"},{default:s(()=>[d(n(L),null,{default:s(()=>[d(n(Q),null,{default:s(()=>[w(m(a.title),1)]),_:2},1024),d(n(q),{class:"text-white"},{default:s(()=>[w(m(a.formattedStart)+" - "+m(a.formatedDateEnd)+".",1)]),_:2},1024)]),_:2},1024),d(n(G),null,{default:s(()=>[c("div",Y,[(l(!0),g(h,null,S(a.attendees,r=>(l(),O(n(J),{key:r.email,class:"bg-blue-500"},{default:s(()=>[w(m(r.email),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)]))),128))])]),t[1]||(t[1]=c("div",{class:"p-10"},null,-1))],64))}};export{ie as default};
