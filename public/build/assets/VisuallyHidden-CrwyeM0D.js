import{i as $,g as F,c as k}from"./Presence-DFUGclOd.js";import{r as p,p as S,D as U,K as G,d as _,a1 as L,aa as K,ab as T,s as j,N as H,g as P,o as q,w as I,a as z,u as h,k as O}from"./app-C7qftLuf.js";import{S as R,P as N}from"./Primitive-NwNlYa7O.js";import{u as Y,b as W}from"./useForwardExpose-CjLCZUZd.js";function J(e){const t=$({dir:p("ltr")});return S(()=>{var o;return(e==null?void 0:e.value)||((o=t.dir)==null?void 0:o.value)||"ltr"})}function x(){const e=p(),t=S(()=>{var o,r;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(r=e.value)==null?void 0:r.$el.nextElementSibling:Y(e)});return{primitiveElement:e,currentElement:t}}const M="data-reka-collection-item";function Q(e={}){const{key:t="",isProvider:o=!1}=e,r=`${t}CollectionProvider`;let a;if(o){const s=p(new Map);a={collectionRef:p(),itemMap:s},U(r,a)}else a=G(r);const E=(s=!1)=>{const n=a.collectionRef.value;if(!n)return[];const i=Array.from(n.querySelectorAll(`[${M}]`)),c=Array.from(a.itemMap.value.values()).sort((d,v)=>i.indexOf(d.ref)-i.indexOf(v.ref));return s?c:c.filter(d=>d.ref.dataset.disabled!=="")},y=_({name:"CollectionSlot",setup(s,{slots:n}){const{primitiveElement:i,currentElement:u}=x();return j(u,()=>{a.collectionRef.value=u.value}),()=>T(R,{ref:i},n)}}),A=_({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:n,attrs:i}){const{primitiveElement:u,currentElement:c}=x();return L(d=>{if(c.value){const v=K(c.value);a.itemMap.value.set(v,{ref:c.value,value:s.value}),d(()=>a.itemMap.value.delete(v))}}),()=>T(R,{...i,[M]:"",ref:u},n)}}),w=S(()=>Array.from(a.itemMap.value.values())),g=S(()=>a.itemMap.value.size);return{getItems:E,reactiveItems:w,itemMapSize:g,CollectionSlot:y,CollectionItem:A}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,t,o){const r=te(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ee[r]}function re(e,t=!1){const o=F();for(const r of e)if(r===o||(r.focus({preventScroll:t}),F()!==o))return}function de(e,t){return e.map((o,r)=>e[(t+r)%e.length])}const[fe,oe]=k("RovingFocusGroup");var ae=_({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:o}){const r=e,a=o,{loop:E,orientation:y,dir:A}=H(r),w=J(A),g=W(r,"currentTabStopId",a,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),s=p(!1),n=p(!1),i=p(0),{getItems:u,CollectionSlot:c}=Q({isProvider:!0});function d(l){const m=!n.value;if(l.currentTarget&&l.target===l.currentTarget&&m&&!s.value){const b=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(b),a("entryFocus",b),!b.defaultPrevented){const C=u().map(f=>f.ref).filter(f=>f.dataset.disabled!==""),B=C.find(f=>f.getAttribute("data-active")===""),D=C.find(f=>f.id===g.value),V=[B,D,...C].filter(Boolean);re(V,r.preventScrollOnEntryFocus)}}n.value=!1}function v(){setTimeout(()=>{n.value=!1},1)}return t({getItems:u}),oe({loop:E,dir:w,orientation:y,currentTabStopId:g,onItemFocus:l=>{g.value=l},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,m)=>(q(),P(h(c),null,{default:I(()=>[z(h(N),{tabindex:s.value||i.value===0?-1:0,"data-orientation":h(y),as:l.as,"as-child":l.asChild,dir:h(w),style:{outline:"none"},onMousedown:m[0]||(m[0]=b=>n.value=!0),onMouseup:v,onFocus:d,onBlur:m[1]||(m[1]=b=>s.value=!1)},{default:I(()=>[O(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),pe=ae,ne=_({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return(t,o)=>(q(),P(h(N),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:I(()=>[O(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),ve=ne;export{pe as R,ve as V,x as a,J as b,re as f,ce as g,fe as i,Q as u,de as w};
